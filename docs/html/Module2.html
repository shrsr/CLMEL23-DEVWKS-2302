<!DOCTYPE html>

<html lang="English" data-content_root="./">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Module 2 &#8212; DEVWKS-2302 1.0 documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=4f649999" />
    <link rel="stylesheet" type="text/css" href="_static/alabaster.css?v=039e1c02" />
    <link rel="stylesheet" type="text/css" href="_static/doc.css?v=d8fe7ef9" />
    <script src="_static/documentation_options.js?v=cd5f4460"></script>
    <script src="_static/doctools.js?v=888ff710"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="prev" title="Module 1" href="Module1.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="module-2">
<h1><a class="toc-backref" href="#id1" role="doc-backlink">Module 2</a><a class="headerlink" href="#module-2" title="Link to this heading">¶</a></h1>
<nav class="contents" id="table-of-contents">
<p class="topic-title">Table of Contents</p>
<ul class="simple">
<li><p><a class="reference internal" href="#module-2" id="id1">Module 2</a></p>
<ul>
<li><p><a class="reference internal" href="#outline" id="id2">Outline</a></p></li>
<li><p><a class="reference internal" href="#instructions" id="id3">Instructions</a></p>
<ul>
<li><p><a class="reference internal" href="#please-close-all-terminal-windows-from-module-1" id="id4">1. Please Close All Terminal Windows from Module 1</a></p></li>
<li><p><a class="reference internal" href="#open-and-modify-the-inventory-networking-file" id="id5">2. Open and Modify the <strong>inventory.networking</strong> File</a></p></li>
<li><p><a class="reference internal" href="#open-and-modify-the-playbook-my-aci-playbook-yml" id="id6">3. Open and Modify the Playbook <strong>my_ACI_playbook.yml</strong></a></p></li>
<li><p><a class="reference internal" href="#starting-the-translation-by-running-our-playbook" id="id7">4. Starting the Translation by Running Our Playbook</a></p></li>
<li><p><a class="reference internal" href="#the-translated-terraform-files" id="id8">5. The Translated Terraform Files</a></p></li>
<li><p><a class="reference internal" href="#modifying-an-aci-tenant-annotation-using-terraform-commands" id="id9">6. Modifying an ACI Tenant Annotation Using Terraform Commands</a></p></li>
</ul>
</li>
</ul>
</li>
</ul>
</nav>
<section id="outline">
<h2><a class="toc-backref" href="#id2" role="doc-backlink">Outline</a><a class="headerlink" href="#outline" title="Link to this heading">¶</a></h2>
<ol class="arabic">
<li><p>In this module, you'll manually translate the same playbook you worked on in Module 1. This step is crucial as it helps you understand the behind-the-scenes processes. Additionally, it allows you to choose your preferred method for future translations: using the translator application or following the manual process.</p></li>
<li><p>The <strong>Module2</strong> directory contains the following files and directories:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>Module2/
├──<span class="w"> </span>ansible_to_TF.yml
├──<span class="w"> </span>filter_plugins/
├──<span class="w"> </span>go.mod
├──<span class="w"> </span>go.sum
├──<span class="w"> </span>inventory.networking
└──<span class="w"> </span>my_ACI_playbook.yml
</pre></div>
</div>
</li>
<li><p>You will be working with and modifying <strong>my_ACI_playbook.yml</strong> and the <strong>inventory.networking</strong>. The remaining files in the directory are necessary for the translation process to be carried out.</p></li>
</ol>
</section>
<section id="instructions">
<h2><a class="toc-backref" href="#id3" role="doc-backlink">Instructions</a><a class="headerlink" href="#instructions" title="Link to this heading">¶</a></h2>
<section id="please-close-all-terminal-windows-from-module-1">
<h3><a class="toc-backref" href="#id4" role="doc-backlink">1. Please Close All Terminal Windows from Module 1</a><a class="headerlink" href="#please-close-all-terminal-windows-from-module-1" title="Link to this heading">¶</a></h3>
</section>
<section id="open-and-modify-the-inventory-networking-file">
<h3><a class="toc-backref" href="#id5" role="doc-backlink">2. Open and Modify the <strong>inventory.networking</strong> File</a><a class="headerlink" href="#open-and-modify-the-inventory-networking-file" title="Link to this heading">¶</a></h3>
<ol class="arabic">
<li><p>Navigate to the <strong>workshop/DEVWKS-2302/Module2</strong> directory and open the <strong>inventory.networking</strong> file.</p></li>
<li><p>Referring to your handout, fill the empty fields in the <strong>inventory.networking</strong> file. Enter the required information directly after the '=' sign without adding any space. Put the APIC Host (this is the APIC's IP address) for <strong>ansible_host=</strong>, the APIC User ID for <strong>ansible_user=</strong>, and the APIC Password for <strong>ansible_password=</strong>.</p>
<p>Example:</p>
<img alt="_images/inventory.png" src="_images/inventory.png" />
</li>
<li><p>Leave the rest of the fields unchanged. Once you have entered the required information, you can save your changes and close the file.</p></li>
</ol>
</section>
<section id="open-and-modify-the-playbook-my-aci-playbook-yml">
<h3><a class="toc-backref" href="#id6" role="doc-backlink">3. Open and Modify the Playbook <strong>my_ACI_playbook.yml</strong></a><a class="headerlink" href="#open-and-modify-the-playbook-my-aci-playbook-yml" title="Link to this heading">¶</a></h3>
<ol class="arabic">
<li><p>In the same directory as before, open the playbook file named <strong>my_ACI_playbook.yml</strong>.</p></li>
<li><p>This playbook contains a total of <strong>seven</strong> tasks.</p></li>
<li><p>Each task in your playbook needs to be modified to include the <strong>register</strong> keyword, followed by a unique identifier. This unique identifier allows each task to store its own individual output. It's crucial that every task has its own unique identifier, to prevent any mix-up of output data between tasks. After you've completed step 4, for your convenience, you can replace your entire <strong>my_ACI_playbook.yml</strong> file with the playbook provided below. This pre-prepared playbook already includes the register keyword and unique identifiers for each task.</p></li>
<li><p>As a next step, the playbook named <strong>ansible_to_TF.yml</strong> should be included as the final task in your playbook. This ensures that it executes only after all the other tasks have been completed. In our current context, this will be the eighth task in the playbook. For your convenience, the eighth task provided in the playbook below is already set as <strong>ansible_to_TF.yml</strong>.</p>
<blockquote>
<div><div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nn">---</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">my_ACI_playbook</span>
<span class="w">  </span><span class="nt">hosts</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">aci</span>
<span class="w">  </span><span class="nt">gather_facts</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">no</span>
<span class="w">  </span><span class="nt">tasks</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Create a tenant</span>
<span class="w">      </span><span class="nt">cisco.aci.aci_tenant</span><span class="p">:</span>
<span class="w">        </span><span class="nt">tenant</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ansible_to_tf</span>
<span class="w">        </span><span class="nt">output_level</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">debug</span>
<span class="w">        </span><span class="nt">state</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">present</span>
<span class="w">      </span><span class="nt">register</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">reg1</span>

<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Configure a VRF</span>
<span class="w">      </span><span class="nt">cisco.aci.aci_vrf</span><span class="p">:</span>
<span class="w">        </span><span class="nt">tenant</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ansible_to_tf</span>
<span class="w">        </span><span class="nt">vrf</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">l3outtest</span>
<span class="w">        </span><span class="nt">output_level</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">debug</span>
<span class="w">        </span><span class="nt">state</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">present</span>
<span class="w">      </span><span class="nt">register</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">reg2</span>

<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Create an L3Out</span>
<span class="w">      </span><span class="nt">cisco.aci.aci_l3out</span><span class="p">:</span>
<span class="w">        </span><span class="nt">tenant</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ansible_to_tf</span>
<span class="w">        </span><span class="nt">l3out</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">l3-dmz-ex-1</span>
<span class="w">        </span><span class="nt">domain</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">l3outtest</span>
<span class="w">        </span><span class="nt">vrf</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">l3outtest</span>
<span class="w">        </span><span class="nt">route_control</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">export</span>
<span class="w">        </span><span class="nt">output_level</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">debug</span>
<span class="w">        </span><span class="nt">state</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">present</span>
<span class="w">      </span><span class="nt">register</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">reg3</span>

<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Create a node profile</span>
<span class="w">      </span><span class="nt">cisco.aci.aci_l3out_logical_node_profile</span><span class="p">:</span>
<span class="w">        </span><span class="nt">tenant</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ansible_to_tf</span>
<span class="w">        </span><span class="nt">l3out</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">l3-dmz-ex-1</span>
<span class="w">        </span><span class="nt">logical_node</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">np1101</span>
<span class="w">        </span><span class="nt">output_level</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">debug</span>
<span class="w">        </span><span class="nt">state</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">present</span>
<span class="w">      </span><span class="nt">register</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">reg4</span>

<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Add a node</span>
<span class="w">      </span><span class="nt">cisco.aci.aci_l3out_logical_node</span><span class="p">:</span>
<span class="w">        </span><span class="nt">tenant</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ansible_to_tf</span>
<span class="w">        </span><span class="nt">l3out</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">l3-dmz-ex-1</span>
<span class="w">        </span><span class="nt">logical_node</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">np1101</span>
<span class="w">        </span><span class="nt">pod_id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span>
<span class="w">        </span><span class="nt">node_id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1101</span>
<span class="w">        </span><span class="nt">router_id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">111.111.111.111</span>
<span class="w">        </span><span class="nt">output_level</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">debug</span>
<span class="w">        </span><span class="nt">state</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">present</span>
<span class="w">      </span><span class="nt">register</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">reg5</span>

<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Create a static route</span>
<span class="w">      </span><span class="nt">cisco.aci.aci_l3out_static_routes</span><span class="p">:</span>
<span class="w">        </span><span class="nt">tenant</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ansible_to_tf</span>
<span class="w">        </span><span class="nt">pod_id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span>
<span class="w">        </span><span class="nt">node_id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1101</span>
<span class="w">        </span><span class="nt">prefix</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">192.168.8.0/24</span>
<span class="w">        </span><span class="nt">l3out</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">l3-dmz-ex-1</span>
<span class="w">        </span><span class="nt">logical_node</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">np1101</span>
<span class="w">        </span><span class="nt">output_level</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">debug</span>
<span class="w">        </span><span class="nt">state</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">present</span>
<span class="w">      </span><span class="nt">register</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">reg6</span>

<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Add a next hop</span>
<span class="w">      </span><span class="nt">cisco.aci.aci_l3out_static_routes_nexthop</span><span class="p">:</span>
<span class="w">        </span><span class="nt">tenant</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ansible_to_tf</span>
<span class="w">        </span><span class="nt">l3out</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">l3-dmz-ex-1</span>
<span class="w">        </span><span class="nt">logical_node</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">np1101</span>
<span class="w">        </span><span class="nt">node_id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1101</span>
<span class="w">        </span><span class="nt">pod_id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span>
<span class="w">        </span><span class="nt">prefix</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">192.168.8.0/24</span>
<span class="w">        </span><span class="nt">nexthop</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">192.168.181.99</span>
<span class="w">        </span><span class="nt">output_level</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">debug</span>
<span class="w">        </span><span class="nt">state</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">present</span>
<span class="w">      </span><span class="nt">register</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">reg7</span>

<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Include tasks to convert the play to TF config</span>
<span class="w">      </span><span class="nt">ansible.builtin.include_tasks</span><span class="p">:</span>
<span class="w">        </span><span class="nt">file</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ansible_to_TF.yml</span>
</pre></div>
</div>
</div></blockquote>
</li>
<li><p>It's crucial to add the <strong>register</strong> keyword followed by a unique identifier to all the tasks in the playbook. This is because the data stored in register will be parsed and used as input for the Terraform import function during the translation process.</p></li>
<li><p>It's essential to include the <strong>ansible_to_TF.yml</strong> file in the playbook. This file contains the tasks that perform the translation process. By including this file, you ensure that its tasks are executed after the main playbook tasks. This sequence is important because the translation tasks in <strong>ansible_to_TF.yml</strong> rely on the data generated by the main playbook tasks, which is stored using the <strong>register</strong> keyword. Without including <strong>ansible_to_TF.yml</strong>, the translation tasks wouldn't be executed, and the translation process wouldn't take place.</p></li>
<li><p>After pasting the code into your <strong>my_ACI_playbook.yml</strong> file, please personalize your <strong>tenant name</strong>. Replace <strong>ansible_to_tf</strong> with your first name in the <strong>Create a tenant</strong> task. This ensures your configurations won't conflict with others and helps you easily identify your resources. After making this change, save and close the file.</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Create a tenant</span>
<span class="w">  </span><span class="nt">cisco.aci.aci_tenant</span><span class="p">:</span>
<span class="w">    </span><span class="nt">tenant</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">&lt;your_first_name&gt;</span><span class="w">  </span><span class="c1"># Replace &lt;your_first_name&gt; with your actual first name</span>
<span class="w">    </span><span class="nt">output_level</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">debug</span>
<span class="w">    </span><span class="nt">state</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">present</span>
<span class="w">  </span><span class="nt">register</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">reg1</span>
</pre></div>
</div>
</li>
</ol>
</section>
<section id="starting-the-translation-by-running-our-playbook">
<h3><a class="toc-backref" href="#id7" role="doc-backlink">4. Starting the Translation by Running Our Playbook</a><a class="headerlink" href="#starting-the-translation-by-running-our-playbook" title="Link to this heading">¶</a></h3>
<ol class="arabic">
<li><p>Please use the keys <strong>Ctrl-Alt-T</strong> on your keyboard to open a terminal window or open it using the terminal icon on your desktop.</p></li>
<li><p>Navigate to the <strong>workshop/DEVWKS-2302/Module2</strong> directory in your terminal by using the following command:</p>
<blockquote>
<div><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span><span class="w"> </span>workshop/DEVWKS-2302/Module2
</pre></div>
</div>
</div></blockquote>
</li>
<li><p>Run the playbook using the <cite>ansible-playbook</cite> command followed by the playbook name and the inventory file. The <cite>-i</cite> option specifies the inventory file. Here is the command:</p>
<blockquote>
<div><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ansible-playbook<span class="w"> </span>my_ACI_playbook.yml<span class="w"> </span>-i<span class="w"> </span>inventory.networking<span class="w"> </span>-vvv
</pre></div>
</div>
</div></blockquote>
</li>
<li><p>Press Enter to start the execution. Ansible will now run your modified playbook using the specified inventory.</p></li>
<li><p>Wait for the run to complete.</p></li>
</ol>
</section>
<section id="the-translated-terraform-files">
<h3><a class="toc-backref" href="#id8" role="doc-backlink">5. The Translated Terraform Files</a><a class="headerlink" href="#the-translated-terraform-files" title="Link to this heading">¶</a></h3>
<ol class="arabic simple">
<li><p>Navigate to your <strong>Module2</strong> folder and you will see that a number of files of different formats were generated.</p></li>
<li><p>Locate the <strong>my_ACI_playbook</strong> folder.</p></li>
<li><p>As in Module 1, you will find the translated Terraform files in it.</p></li>
</ol>
</section>
<section id="modifying-an-aci-tenant-annotation-using-terraform-commands">
<h3><a class="toc-backref" href="#id9" role="doc-backlink">6. Modifying an ACI Tenant Annotation Using Terraform Commands</a><a class="headerlink" href="#modifying-an-aci-tenant-annotation-using-terraform-commands" title="Link to this heading">¶</a></h3>
<ol class="arabic">
<li><p>Open a new terminal window using the <strong>Ctrl-Alt-T</strong> shortcut on your keyboard or by clicking on the terminal icon on your desktop.</p></li>
<li><p>Navigate to the <strong>workshop/DEVWKS-2302/Module2/my_ACI_playbook</strong> directory using the cd command:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span><span class="w"> </span>workshop/DEVWKS-2302/Module2/my_ACI_playbook
</pre></div>
</div>
</li>
<li><p>Run the following command to initialize Terraform in your working directory:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>terraform<span class="w"> </span>init
</pre></div>
</div>
</li>
<li><p>Open the Terraform configuration file named <strong>resources.tf</strong>. Locate the resource block for <strong>&quot;aci_tenant&quot; &quot;translated_tenant_ansible_to_tf&quot;</strong> and find the <strong>annotation</strong> attribute. It should look like this:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>resource<span class="w"> </span><span class="s2">&quot;aci_tenant&quot;</span><span class="w"> </span><span class="s2">&quot;translated_tenant_ansible_to_tf&quot;</span><span class="w"> </span><span class="o">{</span>
<span class="w">  </span><span class="nv">annotation</span><span class="w">                    </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;orchestrator:ansible&quot;</span>
<span class="w">  </span><span class="nv">description</span><span class="w">                   </span><span class="o">=</span><span class="w"> </span>null
<span class="w">  </span><span class="nv">name</span><span class="w">                          </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;ansible_to_tf&quot;</span>
<span class="w">  </span><span class="nv">name_alias</span><span class="w">                    </span><span class="o">=</span><span class="w"> </span>null
<span class="w">  </span><span class="nv">relation_fv_rs_tenant_mon_pol</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>null
<span class="w">  </span><span class="nv">relation_fv_rs_tn_deny_rule</span><span class="w">   </span><span class="o">=</span><span class="w"> </span>null
<span class="o">}</span>
</pre></div>
</div>
</li>
<li><p>Open your APIC URL in a web browser and sign back in using the credentials provided in the handout if you are logged out.</p></li>
<li><p>Navigate to the <strong>ansible_to_tf</strong> tenant under the Tenants section. Check for the attached <strong>Ansible</strong> label. This label corresponds to the <strong>annotation</strong> value <strong>&quot;orchestrator:ansible&quot;</strong> in your Terraform file.</p></li>
</ol>
<blockquote>
<div><img alt="_images/tenant_ansible.png" src="_images/tenant_ansible.png" />
</div></blockquote>
<ol class="arabic simple" start="7">
<li><p>Next, in the resource <strong>&quot;aci_tenant&quot; &quot;translated_tenant_ansible_to_tf&quot;</strong> block, change the annotation value to <strong>&quot;orchestrator:terraform&quot;</strong> in your Terraform file as seen below:</p></li>
</ol>
<blockquote>
<div><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>resource<span class="w"> </span><span class="s2">&quot;aci_tenant&quot;</span><span class="w"> </span><span class="s2">&quot;translated_tenant_ansible_to_tf&quot;</span><span class="w"> </span><span class="o">{</span>
<span class="w">  </span><span class="nv">annotation</span><span class="w">                    </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;orchestrator:terraform&quot;</span>
<span class="w">  </span><span class="nv">description</span><span class="w">                   </span><span class="o">=</span><span class="w"> </span>null
<span class="w">  </span><span class="nv">name</span><span class="w">                          </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;ansible_to_tf&quot;</span>
<span class="w">  </span><span class="nv">name_alias</span><span class="w">                    </span><span class="o">=</span><span class="w"> </span>null
<span class="w">  </span><span class="nv">relation_fv_rs_tenant_mon_pol</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>null
<span class="w">  </span><span class="nv">relation_fv_rs_tn_deny_rule</span><span class="w">   </span><span class="o">=</span><span class="w"> </span>null
<span class="o">}</span>
</pre></div>
</div>
</div></blockquote>
<ol class="arabic" start="8">
<li><p>Verify your changes by running the terraform plan command.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>terraform<span class="w"> </span>plan
</pre></div>
</div>
</li>
<li><p>You'll see that the annotation will be updated from <strong>&quot;orchestrator:ansible&quot;</strong> to <strong>&quot;orchestrator:terraform&quot;</strong> for the <strong>&quot;aci_tenant&quot; &quot;translated_tenant_ansible_to_tf&quot;</strong> resource.</p>
<img alt="_images/annotation_change.png" src="_images/annotation_change.png" />
</li>
<li><p>To apply these changes to your actual infrastructure, run the terraform apply command:</p></li>
</ol>
<blockquote>
<div><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>terraform<span class="w"> </span>apply
</pre></div>
</div>
</div></blockquote>
<ol class="arabic" start="11">
<li><p>Finally, return to the APIC in your browser and navigate to the <strong>ansible_to_tf</strong> tenant. The <strong>Terraform</strong> label should now be attached to the Tenant, indicating a successful update of the annotation value.</p>
<img alt="_images/tenant_terraform.png" src="_images/tenant_terraform.png" />
</li>
</ol>
</section>
</section>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="index.html">DEVWKS-2302</a></h1>








<h3>Navigation</h3>
<p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="Introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="Workshop_directory_structure.html">Workshop Directory</a></li>
<li class="toctree-l1"><a class="reference internal" href="Module1.html">Module 1</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Module 2</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#outline">Outline</a></li>
<li class="toctree-l2"><a class="reference internal" href="#instructions">Instructions</a></li>
</ul>
</li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
      <li>Previous: <a href="Module1.html" title="previous chapter">Module 1</a></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2023, Shreyas Srish.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 7.2.6</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.13</a>
      
      |
      <a href="_sources/Module2.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>